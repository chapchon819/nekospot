<%= turbo_frame_tag dom_id(review) do %>
  <div class="flex flex-col gap-3 px-4 py-6 md:p-6 space-y-2" data-controller="image-modal">
    <div class="flex w-full justify-between">
      <div class="flex items-center">
        <div>
          <% if review.user.avatar.present? %>
            <%= image_tag review.user.avatar.url, class: "inline-block rounded-full h-9 w-9" %>
          <% else %>
            <%= image_tag("default.png", class: "inline-block rounded-full h-9 w-9") %>
          <% end %>
        </div>
        <div class="ml-3">
          <span class="block text-sm text-neutral"><%= review.user.name %></span>
          <span class="block text-xs text-secondary"><%= review.created_at.strftime('%Y/%m/%d') %></span>
        </div>
      </div>
      <div class="flex space-x-2 items-center">
        <% if review.user == current_user %>
          <%= render 'reviews/crud_menus', review: review %>
        <% end %>
      </div>
    </div>
    <div class="-ml-1 flex gap-0.5">  
      <% rating = review.rating %>
      <% full_stars = rating %>
      <% empty_stars = 5 - rating %>
      <% full_stars.times do %>
        <i class="ph-fill ph-star fa-lg text-yellow-400"></i>
      <% end %>
      <% empty_stars.times do %>
        <i class="ph-fill ph-star fa-lg text-gray-100"></i>
      <% end %>
    </div>
    <p class="text-secondary"><%= review.body %></p>
    <% if review.images.present? %>
      <div class="flex space-x-2">
        <% review.images.each do |image| %>
          <%= image_tag image.to_s, data: { action: "click->image-modal#open", image_url: image.url }, class: "inline-block rounded h-16 w-16" %>
        <% end %>
      </div>
    <% end %>
    <% unless review.user == current_user %>
      <div class="flex justify-end space-x-2">
        <button class="bg-primary text-secondary text-sm px-3 drop-shadow-md py-2 rounded-lg flex mx-auto items-center justify-center">
          <p><i class="ph ph-fill ph-hand-heart fa-lg"></i> 参考になった</p>
        </button>
      </div>
    <% end %>
<!-- モーダル -->
<div class="fixed inset-0 bg-gray-900 bg-opacity-75 hidden" data-image-modal-target="imageModal">
  <div class="fixed inset-0 flex items-center justify-center">
    <div class="bg-white p-4 rounded shadow-md relative">
      <img data-image-modal-target="image" class="max-w-full max-h-full"/>
      <button data-action="click->image-modal#close" class="absolute top-4 right-8 m-4 text-secondary">
        <i class="ph ph-x h-6 w-6 text-secondary"></i>
      </button>
    </div>
  </div>
</div>
  </div>

<% end %>

